<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Talking Dunyakha</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #87CEEB 0%, #98FB98 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            padding: 0;
            touch-action: manipulation;
        }
        
        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        #main-menu {
            width: 100vw;
            height: 100vh;
            max-width: 500px;
            max-height: 900px;
            text-align: center;
            animation: fadeIn 0.8s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .menu-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 30px 25px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 5px solid #FFB6C1;
        }
        
        .logo {
            color: #FF69B4;
            font-size: 2.8rem;
            margin-bottom: 5px;
            text-shadow: 3px 3px 0 rgba(255, 182, 193, 0.3);
            font-weight: 900;
        }
        
        .logo span {
            color: #9370DB;
            font-size: 2.5rem;
            display: inline-block;
            animation: bounce 2s infinite;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 40px;
            font-weight: 500;
        }
        
        .menu-btn {
            display: block;
            width: 100%;
            margin: 15px 0;
            padding: 22px;
            font-size: 1.3rem;
            font-weight: 700;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            color: white;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            touch-action: manipulation;
        }
        
        .menu-btn:active {
            transform: scale(0.98);
        }
        
        .play-btn {
            background: linear-gradient(145deg, #FF69B4, #FF1493);
            margin-top: 20px;
        }
        
        .play-btn:hover {
            background: linear-gradient(145deg, #FF1493, #FF69B4);
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 105, 180, 0.4);
        }
        
        .settings-btn {
            background: linear-gradient(145deg, #9370DB, #8A2BE2);
        }
        
        .settings-btn:hover {
            background: linear-gradient(145deg, #8A2BE2, #9370DB);
            transform: translateY(-3px);
        }
        
        .footer {
            margin-top: 30px;
            color: #888;
            font-size: 0.9rem;
        }
        
        /* –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω */
        #game-screen {
            display: none;
            width: 100vw;
            height: 100vh;
            max-width: 500px;
            max-height: 900px;
            position: relative;
        }
        
        .game-container {
            background: linear-gradient(180deg, #E6E6FA 0%, #FFF0F5 100%);
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar {
            background: linear-gradient(90deg, #FFB6C1, #FF69B4);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
            position: relative;
        }
        
        .stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.3);
            padding: 8px 15px;
            border-radius: 20px;
            color: #333;
            font-weight: 600;
            backdrop-filter: blur(5px);
            font-size: 0.9rem;
        }
        
        .stat-icon {
            font-size: 1.2rem;
        }
        
        /* –û–±–ª–∞—Å—Ç—å –∫–æ—Ä–æ–≤—ã */
        .cow-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            position: relative;
            overflow: hidden;
            min-height: 0;
        }
        
        .room-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #F0F8FF 0%, #E0FFFF 100%);
            z-index: 1;
            border-radius: 20px;
            margin: 10px;
            border: 4px solid #FFD700;
        }
        
        .cow-container {
            position: relative;
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            width: 100%;
        }
        
        /* –ü–†–û–°–¢–ê–Ø –ö–û–†–û–í–ö–ê - –£–ë–†–ê–ù –°–õ–û–ñ–ù–´–ô –î–ò–ó–ê–ô–ù */
        .cow-character {
            width: 220px;
            height: 220px;
            cursor: pointer;
            transition: transform 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
            filter: drop-shadow(0 15px 25px rgba(0, 0, 0, 0.2));
            touch-action: manipulation;
            border-radius: 50%;
            background: #FFF;
            padding: 20px;
            border: 6px solid #FFD700;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }
        
        .cow-emoji {
            font-size: 120px;
            transition: all 0.3s ease;
        }
        
        .cow-character:active .cow-emoji {
            transform: scale(0.9);
        }
        
        .message-bubble {
            background: white;
            padding: 15px 20px;
            border-radius: 25px;
            max-width: 280px;
            font-weight: 600;
            color: #333;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            border: 3px solid #FF69B4;
            text-align: center;
            font-size: 1rem;
            word-wrap: break-word;
            display: none;
            z-index: 100;
        }
        
        .message-bubble.show {
            display: block;
            animation: messagePopIn 0.3s ease forwards;
        }
        
        .message-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: white transparent transparent;
        }
        
        .message-bubble::before {
            content: '';
            position: absolute;
            bottom: -13px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 13px 13px 0;
            border-style: solid;
            border-color: #FF69B4 transparent transparent;
        }
        
        /* –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .detailed-stats {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 15px;
            margin: 10px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 3px solid #9370DB;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 15px;
            background: rgba(147, 112, 219, 0.1);
        }
        
        .stat-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #333;
        }
        
        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
            color: #FF69B4;
        }
        
        .stat-hint {
            font-size: 0.8rem;
            color: #666;
            margin-top: 5px;
            text-align: center;
        }
        
        /* –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π */
        .actions-panel {
            padding: 15px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            background: rgba(255, 255, 255, 0.95);
            border-top: 4px solid #FFB6C1;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            max-height: 170px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .action-btn {
            background: linear-gradient(145deg, #FFB6C1, #FF69B4);
            border: none;
            border-radius: 20px;
            padding: 16px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
            box-shadow: 0 5px 15px rgba(255, 182, 193, 0.3);
            touch-action: manipulation;
        }
        
        .action-btn:active {
            transform: scale(0.95);
            box-shadow: 0 3px 10px rgba(255, 182, 193, 0.2);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .btn-icon {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .btn-text {
            font-size: 0.8rem;
            text-align: center;
            line-height: 1.2;
        }
        
        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */
        #settings-screen {
            display: none;
            width: 100vw;
            height: 100vh;
            max-width: 500px;
            max-height: 900px;
        }
        
        .settings-container {
            background: rgba(255, 255, 255, 0.98);
            width: 100%;
            height: 100%;
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .settings-title {
            color: #FF69B4;
            font-size: 2.2rem;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 900;
            text-shadow: 2px 2px 0 #FFB6C1;
        }
        
        .settings-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            color: #9370DB;
            font-size: 1.3rem;
            margin-bottom: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title span {
            font-size: 1.5rem;
        }
        
        .settings-item {
            background: #FFF0F5;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 5px solid #FF69B4;
        }
        
        .settings-item label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #333;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            background: #FFB6C1;
            border-radius: 4px;
            margin-top: 10px;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 26px;
            height: 26px;
            background: #9370DB;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(147, 112, 219, 0.3);
            border: 3px solid white;
        }
        
        .toggle {
            position: relative;
            width: 52px;
            height: 28px;
            background: #FFB6C1;
            border-radius: 14px;
            transition: background 0.3s;
            cursor: pointer;
        }
        
        .toggle::after {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .toggle.active {
            background: #4CAF50;
        }
        
        .toggle.active::after {
            transform: translateX(24px);
        }
        
        .about-content {
            line-height: 1.6;
            color: #555;
            font-size: 0.95rem;
        }
        
        .about-content h4 {
            color: #9370DB;
            margin: 12px 0 6px;
            font-size: 1.1rem;
        }
        
        .about-content ul {
            padding-left: 20px;
            margin: 8px 0;
        }
        
        .about-content li {
            margin-bottom: 6px;
        }
        
        .author {
            background: linear-gradient(145deg, #9370DB, #FF69B4);
            color: white;
            padding: 18px;
            border-radius: 15px;
            margin-top: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(147, 112, 219, 0.3);
        }
        
        .author-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .back-btn {
            background: linear-gradient(145deg, #FF69B4, #9370DB);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 18px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            box-shadow: 0 10px 20px rgba(255, 105, 180, 0.3);
            transition: all 0.3s;
        }
        
        .back-btn:active {
            transform: scale(0.98);
        }
        
        /* –≠–∫—Ä–∞–Ω —Å–Ω–∞ */
        .sleep-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(25, 25, 112, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }
        
        .sleep-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .sleep-content {
            text-align: center;
            color: white;
        }
        
        .moon {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle at 30% 30%, #FFFACD, #FFD700);
            border-radius: 50%;
            margin: 0 auto 30px;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
            position: relative;
            animation: float 3s ease-in-out infinite;
        }
        
        .sleep-text {
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 700;
            color: #FFD700;
        }
        
        .sleep-stats {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            margin: 20px;
            color: #FFFACD;
        }
        
        .wake-btn {
            background: linear-gradient(145deg, #FFD700, #FFA500);
            color: #333;
            border: none;
            border-radius: 25px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
            transition: all 0.3s;
        }
        
        .wake-btn:active {
            transform: scale(0.95);
        }
        
        /* –ú–∏–Ω–∏-–∏–≥—Ä—ã */
        .mini-game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        
        .mini-game-container {
            background: white;
            border-radius: 25px;
            padding: 25px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            border: 5px solid #FF69B4;
        }
        
        .game-title {
            color: #FF69B4;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 900;
        }
        
        .game-instruction {
            color: #666;
            margin-bottom: 25px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .game-area {
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .game-score {
            font-size: 1.5rem;
            color: #9370DB;
            font-weight: 700;
            margin: 15px 0;
        }
        
        .game-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .game-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 20px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        
        .close-game {
            background: #9370DB;
        }
        
        .game-action {
            background: #4CAF50;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∏–Ω–∏-–∏–≥—Ä */
        .flower {
            width: 50px;
            height: 50px;
            cursor: pointer;
            transition: transform 0.3s;
            font-size: 2.5rem;
            position: absolute;
            animation: flowerAppear 0.5s ease;
        }
        
        .flower:active {
            transform: scale(1.2);
        }
        
        .butterfly {
            position: absolute;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s;
            animation: butterflyFloat 2s infinite alternate;
        }
        
        .butterfly:active {
            transform: scale(1.3);
        }
        
        .puzzle-piece {
            width: 70px;
            height: 70px;
            background: #FFB6C1;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            transition: all 0.3s;
        }
        
        .cloud {
            position: absolute;
            font-size: 3rem;
            cursor: pointer;
            animation: cloudFloat 4s infinite linear;
        }
        
        .fruit {
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 2.5rem;
            position: absolute;
            animation: fruitDrop 3s linear;
        }
        
        .star {
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 2rem;
            position: absolute;
            animation: starTwinkle 2s infinite;
        }
        
        .balloon {
            position: absolute;
            font-size: 2.5rem;
            cursor: pointer;
            animation: balloonFloat 5s linear;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes messagePopIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }
        
        @keyframes cowHappy {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes cowSleep {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(2deg); }
            75% { transform: rotate(-2deg); }
        }
        
        @keyframes cowDance {
            0% { transform: rotate(0) translateY(0); }
            25% { transform: rotate(-10deg) translateY(-10px); }
            50% { transform: rotate(0) translateY(0); }
            75% { transform: rotate(10deg) translateY(-10px); }
            100% { transform: rotate(0) translateY(0); }
        }
        
        @keyframes flowerAppear {
            0% { transform: scale(0); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes butterflyFloat {
            0%, 100% { transform: translateY(0) rotate(0); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }
        
        @keyframes cloudFloat {
            0% { left: -50px; }
            100% { left: 350px; }
        }
        
        @keyframes fruitDrop {
            0% { top: -50px; transform: rotate(0); }
            100% { top: 200px; transform: rotate(360deg); }
        }
        
        @keyframes starTwinkle {
            0%, 100% { opacity: 0.5; transform: scale(0.9); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        @keyframes balloonFloat {
            0% { bottom: -50px; }
            100% { bottom: 250px; }
        }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—Ä–æ–≤—ã - –£–ü–†–û–©–ï–ù–´ */
        .cow-happy .cow-emoji {
            animation: cowHappy 1s infinite;
        }
        
        .cow-sleep .cow-emoji {
            content: 'üò¥';
            animation: cowSleep 3s infinite;
        }
        
        .cow-dance .cow-emoji {
            animation: cowDance 0.5s infinite;
        }
        
        .cow-hungry .cow-emoji {
            content: 'üòã';
            animation: wiggle 0.5s infinite;
        }
        
        .cow-sad .cow-emoji {
            content: 'üòî';
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .logo {
                font-size: 2.2rem;
            }
            
            .logo span {
                font-size: 2rem;
            }
            
            .menu-btn {
                padding: 20px;
                font-size: 1.2rem;
            }
            
            .cow-character {
                width: 190px;
                height: 190px;
            }
            
            .cow-emoji {
                font-size: 100px;
            }
            
            .actions-panel {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
                padding: 12px;
            }
            
            .action-btn {
                padding: 14px 3px;
            }
            
            .btn-icon {
                font-size: 1.6rem;
            }
            
            .btn-text {
                font-size: 0.75rem;
            }
            
            .message-bubble {
                max-width: 250px;
                padding: 12px 18px;
                font-size: 0.95rem;
            }
        }
        
        @media (max-height: 700px) {
            .cow-character {
                width: 170px;
                height: 170px;
            }
            
            .cow-emoji {
                font-size: 90px;
            }
            
            .actions-panel {
                max-height: 150px;
            }
            
            .detailed-stats {
                padding: 10px;
            }
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stat-progress {
            flex: 1;
            height: 12px;
            background: #FFB6C1;
            border-radius: 6px;
            margin: 0 10px;
            overflow: hidden;
        }
        
        .stat-progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .hunger-fill { background: linear-gradient(90deg, #FF9800, #FF5722); }
        .energy-fill { background: linear-gradient(90deg, #2196F3, #0D47A1); }
        .happiness-fill { background: linear-gradient(90deg, #FFEB3B, #FF9800); }
        .cleanliness-fill { background: linear-gradient(90deg, #00BCD4, #006064); }
        
        /* –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ */
        .actions-panel::-webkit-scrollbar {
            width: 6px;
        }
        
        .actions-panel::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }
        
        .actions-panel::-webkit-scrollbar-thumb {
            background: #FF69B4;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
    <div id="main-menu">
        <div class="menu-container">
            <h1 class="logo">My Talking <span>üêÑ</span></h1>
            <h1 class="logo" style="font-size: 2.5rem; color: #9370DB;">Dunyakha</h1>
            <p class="subtitle">–ú–∏–ª–∞—è –≥–æ–≤–æ—Ä—è—â–∞—è –º–∏–Ω–∏-–∫–æ—Ä–æ–≤–∫–∞!</p>
            
            <button class="menu-btn play-btn" onclick="startGame()">
                üéÆ –ò–ì–†–ê–¢–¨
            </button>
            
            <button class="menu-btn settings-btn" onclick="showSettings()">
                ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò
            </button>
            
            <div class="footer">
                –î–ª—è –¥–µ—Ç–µ–π –æ—Ç 3 –ª–µ—Ç ‚Ä¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –≤–µ—Å–µ–ª–æ!
            </div>
        </div>
    </div>
    
    <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
    <div id="game-screen">
        <div class="game-container">
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
            <div class="top-bar">
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-icon">üí∞</span>
                        <span id="coins">50</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <span id="level">–£—Ä–æ–≤–µ–Ω—å 1</span>
                    </div>
                    <button class="stat-item" onclick="showSettings()" style="cursor: pointer; background: rgba(255,255,255,0.4);">
                        <span class="stat-icon">‚öôÔ∏è</span>
                    </button>
                </div>
            </div>
            
            <!-- –û–±–ª–∞—Å—Ç—å –∫–æ—Ä–æ–≤—ã -->
            <div class="cow-area">
                <div class="room-bg"></div>
                
                <div class="cow-container">
                    <!-- –ü–†–û–°–¢–ê–Ø –ö–û–†–û–í–ö–ê –≠–ú–û–î–ó–ò -->
                    <div class="cow-character" id="cow-character" onclick="petCow()">
                        <div class="cow-emoji">üêÑ</div>
                    </div>
                    
                    <div class="message-bubble" id="message-bubble">
                        –ü—Ä–∏–≤–µ—Ç! –Ø Dunyakha! üêÑ
                    </div>
                    
                    <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="detailed-stats">
                        <div class="stat-row">
                            <div class="stat-info">
                                <span>üçé</span>
                                <span>–ì–æ–ª–æ–¥:</span>
                            </div>
                            <div class="stat-progress">
                                <div class="stat-progress-fill hunger-fill" id="hunger-fill"></div>
                            </div>
                            <div class="stat-value" id="hunger-value">80%</div>
                        </div>
                        
                        <div class="stat-row">
                            <div class="stat-info">
                                <span>‚ö°</span>
                                <span>–≠–Ω–µ—Ä–≥–∏—è:</span>
                            </div>
                            <div class="stat-progress">
                                <div class="stat-progress-fill energy-fill" id="energy-fill"></div>
                            </div>
                            <div class="stat-value" id="energy-value">90%</div>
                        </div>
                        
                        <div class="stat-row">
                            <div class="stat-info">
                                <span>üòä</span>
                                <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</span>
                            </div>
                            <div class="stat-progress">
                                <div class="stat-progress-fill happiness-fill" id="happiness-fill"></div>
                            </div>
                            <div class="stat-value" id="happiness-value">85%</div>
                        </div>
                        
                        <div class="stat-hint">
                            üí§ –°–æ–Ω –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é ‚Ä¢ üçé –ö–æ—Ä–º–∏ 3 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å ‚Ä¢ üéÆ –ò–≥—Ä–∞–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="actions-panel" id="actions-panel">
                <button class="action-btn" onclick="feedCow()">
                    <div class="btn-icon">üçé</div>
                    <div class="btn-text">–ü–æ–∫–æ—Ä–º–∏—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="toggleSleep()">
                    <div class="btn-icon">üí§</div>
                    <div class="btn-text">–£–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="playMiniGame()">
                    <div class="btn-icon">üéÆ</div>
                    <div class="btn-text">–ü–æ–∏–≥—Ä–∞—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="cleanCow()">
                    <div class="btn-icon">üõÅ</div>
                    <div class="btn-text">–ü–æ–º—ã—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="healCow()">
                    <div class="btn-icon">‚ù§Ô∏è</div>
                    <div class="btn-text">–ü–æ–ª–µ—á–∏—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="danceCow()">
                    <div class="btn-icon">üíÉ</div>
                    <div class="btn-text">–ü–æ—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="makeCowTalk()">
                    <div class="btn-icon">üó£Ô∏è</div>
                    <div class="btn-text">–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å</div>
                </button>
                
                <button class="action-btn" onclick="useToilet()">
                    <div class="btn-icon">üöΩ</div>
                    <div class="btn-text">–¢—É–∞–ª–µ—Ç</div>
                </button>
            </div>
            
            <!-- –≠–∫—Ä–∞–Ω —Å–Ω–∞ -->
            <div class="sleep-overlay" id="sleep-overlay">
                <div class="sleep-content">
                    <div class="moon"></div>
                    <div class="sleep-text">Dunyakha —Å–ø–∏—Ç —Å–ª–∞–¥–∫–æ... üåô</div>
                    
                    <div class="sleep-stats">
                        <p>‚ö° –≠–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è: +3% –≤ —Å–µ–∫—É–Ω–¥—É</p>
                        <p>üçé –ì–æ–ª–æ–¥ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ</p>
                        <p>üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ</p>
                    </div>
                    
                    <button class="wake-btn" onclick="wakeUp()">
                        üò¥ –†–ê–ó–ë–£–î–ò–¢–¨
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-screen">
        <div class="settings-container">
            <h2 class="settings-title">‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</h2>
            
            <div class="settings-section">
                <h3 class="section-title"><span>üîä</span> –ó–≤—É–∫</h3>
                <div class="settings-item">
                    <label>
                        –ì—Ä–æ–º–∫–æ—Å—Ç—å –≥–æ–ª–æ—Å–∞
                        <input type="range" class="slider" id="voice-volume" min="0" max="100" value="70">
                    </label>
                </div>
                <div class="settings-item">
                    <label>
                        –ó–≤—É–∫–∏ –∏–≥—Ä—ã
                        <div class="toggle active" id="sound-toggle" onclick="toggleSetting('sound')"></div>
                    </label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3 class="section-title"><span>üéÆ</span> –ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å</h3>
                <div class="settings-item">
                    <label>
                        –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                        <div class="toggle active" id="autosave-toggle" onclick="toggleSetting('autosave')"></div>
                    </label>
                </div>
                <div class="settings-item">
                    <label>
                        –ü–æ–¥—Å–∫–∞–∑–∫–∏
                        <div class="toggle active" id="hints-toggle" onclick="toggleSetting('hints')"></div>
                    </label>
                </div>
                <div class="settings-item">
                    <label>
                        –ß–∞—Å—Ç–æ—Ç–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
                        <select id="talk-frequency" style="padding: 5px 10px; border-radius: 10px; border: 2px solid #FF69B4;">
                            <option value="low">–†–µ–¥–∫–æ</option>
                            <option value="normal" selected>–ù–æ—Ä–º–∞–ª—å–Ω–æ</option>
                            <option value="often">–ß–∞—Å—Ç–æ</option>
                        </select>
                    </label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3 class="section-title"><span>‚ú®</span> –ì—Ä–∞—Ñ–∏–∫–∞</h3>
                <div class="settings-item">
                    <label>
                        –ê–Ω–∏–º–∞—Ü–∏–∏
                        <div class="toggle active" id="animations-toggle" onclick="toggleSetting('animations')"></div>
                    </label>
                </div>
                <div class="settings-item">
                    <label>
                        –Ø—Ä–∫–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                        <div class="toggle" id="effects-toggle" onclick="toggleSetting('effects')"></div>
                    </label>
                </div>
            </div>
            
            <div class="settings-section">
                <h3 class="section-title"><span>‚ÑπÔ∏è</span> –û –∏–≥—Ä–µ</h3>
                <div class="settings-item">
                    <div class="about-content">
                        <h4>My Talking Dunyakha üêÑ</h4>
                        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –∑–∞–±–æ—Ç—ã –æ –º–∏–ª–æ–π –º–∏–Ω–∏-–∫–æ—Ä–æ–≤–∫–µ Dunyakha! –≠—Ç–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞ –¥–ª—è –¥–µ—Ç–µ–π –æ—Ç 3 –ª–µ—Ç, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∑–∞–±–æ—Ç–µ –æ –∂–∏–≤–æ—Ç–Ω—ã—Ö.</p>
                        
                        <h4>‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã:</h4>
                        <ul>
                            <li><strong>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π:</strong> –≥–æ–ª–æ–¥, —ç–Ω–µ—Ä–≥–∏—è, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</li>
                            <li><strong>8 –æ–±—É—á–∞—é—â–∏—Ö –º–∏–Ω–∏-–∏–≥—Ä</strong> –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–Ω–∏–º–∞–Ω–∏—è –∏ –º–æ—Ç–æ—Ä–∏–∫–∏</li>
                            <li><strong>–ì–æ–≤–æ—Ä—è—â–∞—è –∫–æ—Ä–æ–≤–∫–∞</strong> —Å –º–∏–ª—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏ (–≥–æ–≤–æ—Ä–∏—Ç —Ä–µ–¥–∫–æ, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å)</li>
                            <li><strong>–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</strong> —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –ø–æ —É—Ö–æ–¥—É</li>
                            <li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</strong> - –Ω–µ—Ç —Ä–µ–∫–ª–∞–º—ã –∏ –ø–æ–∫—É–ø–æ–∫</li>
                            <li><strong>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</strong> - –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è</li>
                        </ul>
                        
                        <h4>üìö –ß–µ–º—É —É—á–∏—Ç –∏–≥—Ä–∞:</h4>
                        <ul>
                            <li>–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ø–∏—Ç–æ–º—Ü–∞</li>
                            <li>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—é —ç–º–æ—Ü–∏–π</li>
                            <li>–†–∞–∑–≤–∏—Ç–∏—é –º–µ–ª–∫–æ–π –º–æ—Ç–æ—Ä–∏–∫–∏</li>
                            <li>–ü–æ–Ω–∏–º–∞–Ω–∏—é –±–∞–∑–æ–≤—ã—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∂–∏–≤—ã—Ö —Å—É—â–µ—Å—Ç–≤</li>
                        </ul>
                        
                        <h4>üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è v5.0:</h4>
                        <ul>
                            <li><strong>–ü—Ä–æ—Å—Ç–∞—è –º–∏–ª–∞—è –∫–æ—Ä–æ–≤–∫–∞!</strong> –ß–∏—Å—Ç—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω</li>
                            <li>–£–±—Ä–∞–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏, –∫–æ—Ä–æ–≤–∫–∞ –ø—Ä–æ—Å—Ç–æ —Å—Ç–æ–∏—Ç</li>
                            <li>–î–æ–±–∞–≤–ª–µ–Ω—ã 4 —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ –º–∏–Ω–∏-–∏–≥—Ä—ã</li>
                            <li>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –±–∞–≥–∏ —Å –∏–≥—Ä–∞–º–∏</li>
                            <li>–£–ø—Ä–æ—â–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–µ—Ç–µ–π</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="author">
                <div class="author-name">üë®‚Äçüíª –ê–≤—Ç–æ—Ä –∏–≥—Ä—ã: –î–∞–Ω–∏–ª –§–∞—Ä–¥—Ç–¥–∏–Ω–æ–≤</div>
                <p>üí° –ò–¥–µ—è –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è: –î–∞–Ω–∏–ª–∞ –§–∞—Ä–¥—Ç–¥–∏–Ω–æ–≤–∞</p>
                <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.9;">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ª—é–±–∏—Ç–µ–ª–µ–π –∂–∏–≤–æ—Ç–Ω—ã—Ö! üêÆ‚ù§Ô∏è</p>
            </div>
            
            <button class="back-btn" onclick="backToGame()">
                ‚Üê –í–ï–†–ù–£–¢–¨–°–Ø –í –ò–ì–†–£
            </button>
            
            <button class="back-btn" style="background: linear-gradient(145deg, #4CAF50, #2E7D32); margin-top: 15px;" onclick="resetGame()">
                üîÑ –ù–ê–ß–ê–¢–¨ –°–ù–ê–ß–ê–õ–ê
            </button>
        </div>
    </div>
    
    <!-- –ú–∏–Ω–∏-–∏–≥—Ä—ã -->
    <div class="mini-game-overlay" id="mini-game-overlay">
        <div class="mini-game-container" id="mini-game-container">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –º–∏–Ω–∏-–∏–≥—Ä—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <script>
        // ============================================
        // –ò–ì–†–ê: MY TALKING DUNYAKHA
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø—Ä–æ—Å—Ç–æ–π –∫–æ—Ä–æ–≤–∫–æ–π
        // ============================================
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
        const config = {
            cowName: "Dunyakha",
            maxHunger: 100,
            maxEnergy: 100,
            maxHappiness: 100,
            maxCleanliness: 100,
            tickInterval: 4000,
            hungerDecay: 1.2,
            energyDecay: 0.8,
            happinessDecay: 0.2,
            cleanlinessDecay: 0.1,
            sleepEnergyRecovery: 3,
            sleepHungerDecay: 0.2,
            talkChance: 0.1
        };
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            hunger: 80,
            energy: 90,
            happiness: 85,
            cleanliness: 95,
            coins: 50,
            level: 1,
            isSleeping: false,
            xp: 0,
            maxXP: 100,
            lastTalkTime: 0,
            talkCooldown: 30000
        };
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userSettings = {
            sound: true,
            autosave: true,
            hints: true,
            animations: true,
            effects: false,
            talkFrequency: 'normal',
            voiceVolume: 70
        };
        
        // –°–ª–æ–≤–∞—Ä–Ω—ã–π –∑–∞–ø–∞—Å –∫–æ—Ä–æ–≤–∫–∏
        const cowVocabulary = {
            needs: [
                {condition: () => gameState.hunger < 30, phrases: ["–Ø –≥–æ–ª–æ–¥–Ω–∞—è... üçé", "–•–æ—á—É –ø–æ–∫—É—à–∞—Ç—å! ü•ï", "–ñ–∏–≤–æ—Ç —É—Ä—á–∏—Ç! üçΩÔ∏è"]},
                {condition: () => gameState.energy < 30, phrases: ["–Ø —É—Å—Ç–∞–ª–∞... üí§", "–•–æ—á—É –ø–æ—Å–ø–∞—Ç—å üåô", "–ì–ª–∞–∑–∫–∏ —Å–ª–∏–ø–∞—é—Ç—Å—è üò¥"]},
                {condition: () => gameState.happiness < 40, phrases: ["–ú–Ω–µ —Å–∫—É—á–Ω–æ... üéÆ", "–ü–æ–∏–≥—Ä–∞–π —Å–æ –º–Ω–æ–π! üéØ", "–•–æ—á—É –≤–µ—Å–µ–ª—å—è! ü•≥"]},
                {condition: () => gameState.cleanliness < 60, phrases: ["–Ø –≥—Ä—è–∑–Ω–∞—è! üõÅ", "–ü–æ–º–æ–π –º–µ–Ω—è! üí¶", "–§—É, –ø—ã–ª—å–Ω–æ! üßπ"]}
            ],
            thanks: [
                "–°–ø–∞—Å–∏–±–æ! –¢—ã –ª—É—á—à–∏–π! üíï",
                "–ö–∞–∫ –∑–¥–æ—Ä–æ–≤–æ! üéâ",
                "–Ø —Ç–∞–∫ —Ä–∞–¥–∞! üòä",
                "–ú—É—É—É-–±–ª–∞–≥–æ–¥–∞—Ä—é! üêÑ"
            ],
            greetings: [
                "–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–∂–æ–∫! üëã",
                "–†–∞–¥–∞ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! üåü",
                "–ö–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞? ü§ó",
                "–Ø —Å–æ—Å–∫—É—á–∏–ª–∞—Å—å! üíñ"
            ],
            happy: [
                "–Ø —Ç–∞–∫–∞—è —Å—á–∞—Å—Ç–ª–∏–≤–∞—è! üåà",
                "–£—Ä–∞! –í–µ—Å–µ–ª–æ! üéä",
                "–û–±–æ–∂–∞—é —Å —Ç–æ–±–æ–π –∏–≥—Ä–∞—Ç—å! üéÆ",
                "–¢—ã –º–æ–π –ª—É—á—à–∏–π –¥—Ä—É–≥! üë´"
            ]
        };
        
        // –ú–∏–Ω–∏-–∏–≥—Ä—ã (4 –∏–≥—Ä—ã –≤–º–µ—Å—Ç–æ 8, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å)
        const miniGames = [
            {
                id: 1,
                name: "–°–æ–±–µ—Ä–∏ —Ü–≤–µ—Ç–æ—á–∫–∏",
                description: "–ù–∞–∂–∏–º–∞–π –Ω–∞ —Ü–≤–µ—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –ª—É–≥—É. –°–æ–±–µ—Ä–∏ 8 —Ü–≤–µ—Ç–æ—á–∫–æ–≤!",
                icon: "üå∏",
                maxFlowers: 8,
                play: function() {
                    let score = 0;
                    let flowersOnScreen = 0;
                    const maxFlowers = this.maxFlowers;
                    const gameHTML = `
                        <h2 class="game-title">üå∏ –°–æ–±–µ—Ä–∏ —Ü–≤–µ—Ç–æ—á–∫–∏</h2>
                        <p class="game-instruction">–ù–∞–∂–∏–º–∞–π –Ω–∞ —Ü–≤–µ—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –ª—É–≥—É. –°–æ–±–µ—Ä–∏ ${maxFlowers} —Ü–≤–µ—Ç–æ—á–∫–æ–≤!</p>
                        <div class="game-area" id="game-area" style="position: relative; height: 200px; width: 100%; background: #E8F5E8; border-radius: 15px; border: 3px solid #4CAF50; overflow: hidden;">
                            <!-- –¶–≤–µ—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                        </div>
                        <div class="game-score" id="game-score">–¶–≤–µ—Ç–æ—á–∫–æ–≤: 0/${maxFlowers}</div>
                        <div class="game-buttons">
                            <button class="game-btn close-game" onclick="closeMiniGame()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    `;
                    
                    document.getElementById('mini-game-container').innerHTML = gameHTML;
                    const gameArea = document.getElementById('game-area');
                    
                    function createFlower() {
                        if (score >= maxFlowers || flowersOnScreen >= 3) return;
                        
                        const flower = document.createElement('div');
                        flower.className = 'flower';
                        const flowerTypes = ['üå∏', 'üåº', 'üå∫', 'üåª', 'üåπ', 'üíê', 'ü•Ä', 'ü™∑'];
                        flower.innerHTML = flowerTypes[Math.floor(Math.random() * flowerTypes.length)];
                        flower.style.left = Math.random() * 250 + 'px';
                        flower.style.top = Math.random() * 150 + 'px';
                        flower.style.cursor = 'pointer';
                        
                        flower.addEventListener('click', function handleClick() {
                            score++;
                            flowersOnScreen--;
                            document.getElementById('game-score').textContent = `–¶–≤–µ—Ç–æ—á–∫–æ–≤: ${score}/${maxFlowers}`;
                            this.style.transform = 'scale(1.5)';
                            this.style.opacity = '0.5';
                            this.style.cursor = 'default';
                            
                            this.removeEventListener('click', handleClick);
                            
                            setTimeout(() => {
                                if (this.parentNode) {
                                    this.parentNode.removeChild(this);
                                }
                            }, 300);
                            
                            if (score >= maxFlowers) {
                                setTimeout(() => {
                                    showMessage("–£—Ä–∞! –Ø —Å–æ–±—Ä–∞–ª–∞ –≤—Å–µ —Ü–≤–µ—Ç–æ—á–∫–∏! üå∏", 4000);
                                    gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 30);
                                    gameState.coins += 15;
                                    updateUI();
                                    closeMiniGame();
                                }, 500);
                            } else {
                                createFlower();
                            }
                        });
                        
                        gameArea.appendChild(flower);
                        flowersOnScreen++;
                        
                        if (score < maxFlowers - 1 && flowersOnScreen < 3) {
                            setTimeout(createFlower, 1000);
                        }
                        
                        // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                        setTimeout(() => {
                            if (flower.parentNode && flower.style.opacity !== '0.5') {
                                flower.style.opacity = '0.3';
                                flower.style.transition = 'opacity 1s';
                                setTimeout(() => {
                                    if (flower.parentNode) {
                                        flower.parentNode.removeChild(flower);
                                        flowersOnScreen--;
                                        createFlower();
                                    }
                                }, 1000);
                            }
                        }, 5000);
                    }
                    
                    // –ù–∞—á–∏–Ω–∞–µ–º —Å 2 —Ü–≤–µ—Ç–æ—á–∫–æ–≤
                    for (let i = 0; i < 2; i++) {
                        setTimeout(createFlower, i * 500);
                    }
                }
            },
            {
                id: 2,
                name: "–ù–∞–π–¥–∏ –±–∞–±–æ—á–∫—É",
                description: "–ë–∞–±–æ—á–∫–∞ –ø—Ä—è—á–µ—Ç—Å—è –≤ —Å–∞–¥—É. –ù–∞–π–¥–∏ –µ—ë 5 —Ä–∞–∑!",
                icon: "ü¶ã",
                play: function() {
                    let score = 0;
                    const maxButterflies = 5;
                    const gameHTML = `
                        <h2 class="game-title">ü¶ã –ù–∞–π–¥–∏ –±–∞–±–æ—á–∫—É</h2>
                        <p class="game-instruction">–ë–∞–±–æ—á–∫–∞ –ø—Ä—è—á–µ—Ç—Å—è –≤ —Å–∞–¥—É. –ù–∞–π–¥–∏ –µ—ë ${maxButterflies} —Ä–∞–∑!</p>
                        <div class="game-area" id="game-area" style="position: relative; height: 200px; width: 100%; background: #E8F5E8; border-radius: 15px; border: 3px solid #4CAF50; overflow: hidden;">
                            <!-- –ë–∞–±–æ—á–∫–∞ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                        <div class="game-score" id="game-score">–ù–∞–π–¥–µ–Ω–æ: 0/${maxButterflies}</div>
                        <div class="game-buttons">
                            <button class="game-btn close-game" onclick="closeMiniGame()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    `;
                    
                    document.getElementById('mini-game-container').innerHTML = gameHTML;
                    const gameArea = document.getElementById('game-area');
                    
                    function showButterfly() {
                        if (score >= maxButterflies) return;
                        
                        gameArea.innerHTML = '';
                        
                        const butterfly = document.createElement('div');
                        butterfly.className = 'butterfly';
                        butterfly.innerHTML = 'ü¶ã';
                        butterfly.style.left = Math.random() * 250 + 'px';
                        butterfly.style.top = Math.random() * 150 + 'px';
                        butterfly.style.cursor = 'pointer';
                        
                        butterfly.addEventListener('click', function handleClick() {
                            score++;
                            document.getElementById('game-score').textContent = `–ù–∞–π–¥–µ–Ω–æ: ${score}/${maxButterflies}`;
                            this.style.transform = 'scale(1.5) rotate(360deg)';
                            this.style.opacity = '0.7';
                            this.style.cursor = 'default';
                            
                            this.removeEventListener('click', handleClick);
                            
                            setTimeout(() => {
                                if (score >= maxButterflies) {
                                    showMessage("–Ø –Ω–∞—à–ª–∞ –≤—Å–µ—Ö –±–∞–±–æ—á–µ–∫! ü¶ã", 4000);
                                    gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 25);
                                    gameState.coins += 12;
                                    updateUI();
                                    setTimeout(closeMiniGame, 1000);
                                } else {
                                    setTimeout(showButterfly, 500);
                                }
                            }, 500);
                        });
                        
                        gameArea.appendChild(butterfly);
                        
                        // –ê–≤—Ç–æ–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                        setTimeout(() => {
                            if (butterfly.parentNode && butterfly.style.opacity !== '0.7') {
                                butterfly.style.opacity = '0.3';
                                butterfly.style.transition = 'opacity 0.5s';
                                setTimeout(() => {
                                    if (butterfly.parentNode) {
                                        butterfly.parentNode.removeChild(butterfly);
                                        setTimeout(showButterfly, 300);
                                    }
                                }, 500);
                            }
                        }, 3000);
                    }
                    
                    showButterfly();
                }
            },
            {
                id: 3,
                name: "–õ–æ–ø–∞–π –æ–±–ª–∞–∫–∞",
                description: "–õ–æ–ø–∞–π –æ–±–ª–∞–∫–∞, –ø–æ–∫–∞ –æ–Ω–∏ –ø–ª—ã–≤—É—Ç –ø–æ –Ω–µ–±—É!",
                icon: "‚òÅÔ∏è",
                play: function() {
                    let score = 0;
                    let timeLeft = 20;
                    const gameHTML = `
                        <h2 class="game-title">‚òÅÔ∏è –õ–æ–ø–∞–π –æ–±–ª–∞–∫–∞</h2>
                        <p class="game-instruction">–õ–æ–ø–∞–π –æ–±–ª–∞–∫–∞, –ø–æ–∫–∞ –æ–Ω–∏ –ø–ª—ã–≤—É—Ç –ø–æ –Ω–µ–±—É –∑–∞ 20 —Å–µ–∫—É–Ω–¥!</p>
                        <div class="game-area" id="game-area" style="position: relative; height: 200px; width: 100%; background: #87CEEB; border-radius: 15px; border: 3px solid #2196F3; overflow: hidden;">
                            <!-- –û–±–ª–∞–∫–∞ –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                        <div class="game-score" id="game-score">–û–±–ª–∞–∫–æ–≤: 0 | –í—Ä–µ–º—è: 20—Å</div>
                        <div class="game-buttons">
                            <button class="game-btn close-game" onclick="closeMiniGame()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    `;
                    
                    document.getElementById('mini-game-container').innerHTML = gameHTML;
                    const gameArea = document.getElementById('game-area');
                    
                    // –¢–∞–π–º–µ—Ä
                    const timer = setInterval(() => {
                        timeLeft--;
                        document.getElementById('game-score').textContent = `–û–±–ª–∞–∫–æ–≤: ${score} | –í—Ä–µ–º—è: ${timeLeft}—Å`;
                        
                        if (timeLeft <= 0) {
                            clearInterval(timer);
                            clearInterval(cloudInterval);
                            showMessage(`–Ø –ª–æ–ø–Ω—É–ª–∞ ${score} –æ–±–ª–∞–∫–æ–≤! ‚òÅÔ∏è`, 4000);
                            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + score * 2);
                            gameState.coins += score;
                            updateUI();
                            setTimeout(closeMiniGame, 2000);
                        }
                    }, 1000);
                    
                    // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞–∫–æ–≤
                    function createCloud() {
                        if (timeLeft <= 0) return;
                        
                        const cloud = document.createElement('div');
                        cloud.className = 'cloud';
                        cloud.innerHTML = '‚òÅÔ∏è';
                        cloud.style.left = '-50px';
                        cloud.style.top = Math.random() * 150 + 'px';
                        cloud.style.cursor = 'pointer';
                        cloud.style.fontSize = (Math.random() * 30 + 30) + 'px';
                        cloud.style.opacity = '0.9';
                        
                        cloud.addEventListener('click', function popCloud() {
                            score++;
                            document.getElementById('game-score').textContent = `–û–±–ª–∞–∫–æ–≤: ${score} | –í—Ä–µ–º—è: ${timeLeft}—Å`;
                            this.style.transform = 'scale(1.5)';
                            this.style.opacity = '0';
                            this.style.cursor = 'default';
                            
                            this.removeEventListener('click', popCloud);
                            
                            setTimeout(() => {
                                if (this.parentNode) {
                                    this.parentNode.removeChild(this);
                                }
                            }, 300);
                        });
                        
                        gameArea.appendChild(cloud);
                        
                        // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∑–∞ —ç–∫—Ä–∞–Ω
                        setTimeout(() => {
                            if (cloud.parentNode && cloud.style.opacity !== '0') {
                                cloud.parentNode.removeChild(cloud);
                            }
                        }, 5000);
                    }
                    
                    // –°–æ–∑–¥–∞–µ–º –æ–±–ª–∞–∫–∞ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                    const cloudInterval = setInterval(createCloud, 1000);
                    
                    // –ü–µ—Ä–≤—ã–µ –æ–±–ª–∞–∫–∞
                    for (let i = 0; i < 3; i++) {
                        setTimeout(createCloud, i * 300);
                    }
                }
            },
            {
                id: 4,
                name: "–ü–æ–π–º–∞–π —Ñ—Ä—É–∫—Ç—ã",
                description: "–õ–æ–≤–∏ –ø–∞–¥–∞—é—â–∏–µ —Ñ—Ä—É–∫—Ç—ã –≤ –∫–æ—Ä–∑–∏–Ω–∫—É!",
                icon: "üçé",
                play: function() {
                    let score = 0;
                    let missed = 0;
                    const maxMissed = 5;
                    const gameHTML = `
                        <h2 class="game-title">üçé –ü–æ–π–º–∞–π —Ñ—Ä—É–∫—Ç—ã</h2>
                        <p class="game-instruction">–ù–∞–∂–∏–º–∞–π –Ω–∞ –ø–∞–¥–∞—é—â–∏–µ —Ñ—Ä—É–∫—Ç—ã, –ø–æ–∫–∞ –æ–Ω–∏ –Ω–µ —É–ø–∞–ª–∏! –ü—Ä–æ–ø—É—Å—Ç–∏ –Ω–µ –±–æ–ª—å—à–µ ${maxMissed} —Ñ—Ä—É–∫—Ç–æ–≤.</p>
                        <div class="game-area" id="game-area" style="position: relative; height: 200px; width: 100%; background: #FFF9C4; border-radius: 15px; border: 3px solid #FF9800; overflow: hidden;">
                            <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); font-size: 3rem;">üß∫</div>
                        </div>
                        <div class="game-score" id="game-score">–§—Ä—É–∫—Ç–æ–≤: 0 | –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0/${maxMissed}</div>
                        <div class="game-buttons">
                            <button class="game-btn close-game" onclick="closeMiniGame()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    `;
                    
                    document.getElementById('mini-game-container').innerHTML = gameHTML;
                    const gameArea = document.getElementById('game-area');
                    
                    function createFruit() {
                        if (missed >= maxMissed) return;
                        
                        const fruit = document.createElement('div');
                        fruit.className = 'fruit';
                        const fruits = ['üçé', 'üçê', 'üçä', 'üçã', 'üçå', 'üçâ', 'üçá', 'üçì', 'ü´ê', 'üçà'];
                        fruit.innerHTML = fruits[Math.floor(Math.random() * fruits.length)];
                        fruit.style.left = Math.random() * 250 + 'px';
                        fruit.style.top = '-50px';
                        fruit.style.cursor = 'pointer';
                        
                        fruit.addEventListener('click', function catchFruit() {
                            score++;
                            document.getElementById('game-score').textContent = `–§—Ä—É–∫—Ç–æ–≤: ${score} | –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${missed}/${maxMissed}`;
                            this.style.transform = 'scale(1.5)';
                            this.style.opacity = '0';
                            this.style.cursor = 'default';
                            
                            this.removeEventListener('click', catchFruit);
                            
                            setTimeout(() => {
                                if (this.parentNode) {
                                    this.parentNode.removeChild(this);
                                }
                            }, 300);
                            
                            if (score >= 15) {
                                setTimeout(() => {
                                    showMessage("–Ø –ø–æ–π–º–∞–ª–∞ –º–Ω–æ–≥–æ —Ñ—Ä—É–∫—Ç–æ–≤! üçé", 4000);
                                    gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 35);
                                    gameState.coins += 20;
                                    updateUI();
                                    closeMiniGame();
                                }, 500);
                            }
                        });
                        
                        gameArea.appendChild(fruit);
                        
                        // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏—è
                        setTimeout(() => {
                            if (fruit.parentNode && fruit.style.opacity !== '0') {
                                fruit.parentNode.removeChild(fruit);
                                missed++;
                                document.getElementById('game-score').textContent = `–§—Ä—É–∫—Ç–æ–≤: ${score} | –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${missed}/${maxMissed}`;
                                
                                if (missed >= maxMissed) {
                                    showMessage(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –Ø –ø–æ–π–º–∞–ª–∞ ${score} —Ñ—Ä—É–∫—Ç–æ–≤! üçé`, 4000);
                                    gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + score);
                                    gameState.coins += Math.floor(score / 2);
                                    updateUI();
                                    setTimeout(closeMiniGame, 2000);
                                }
                            }
                        }, 3000);
                        
                        // –°–æ–∑–¥–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ñ—Ä—É–∫—Ç
                        if (missed < maxMissed) {
                            setTimeout(createFruit, 800);
                        }
                    }
                    
                    // –ù–∞—á–∏–Ω–∞–µ–º —Å 3 —Ñ—Ä—É–∫—Ç–æ–≤
                    for (let i = 0; i < 3; i++) {
                        setTimeout(createFruit, i * 400);
                    }
                }
            }
        ];
        
        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const mainMenu = document.getElementById('main-menu');
        const gameScreen = document.getElementById('game-screen');
        const settingsScreen = document.getElementById('settings-screen');
        const cowCharacter = document.getElementById('cow-character');
        const cowEmoji = cowCharacter.querySelector('.cow-emoji');
        const messageBubble = document.getElementById('message-bubble');
        const sleepOverlay = document.getElementById('sleep-overlay');
        const miniGameOverlay = document.getElementById('mini-game-overlay');
        const actionsPanel = document.getElementById('actions-panel');
        
        // –¢–∞–π–º–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
        let messageTimer = null;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            loadSettings();
            updateUI();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
            setInterval(gameTick, config.tickInterval);
            
            // –°–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            setTimeout(() => {
                makeCowTalk(true);
            }, 1500);
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameTick() {
            if (gameState.isSleeping) {
                // –í–æ —Å–Ω–µ —ç–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –≥–æ–ª–æ–¥ –º–µ–¥–ª–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
                gameState.energy = Math.min(config.maxEnergy, gameState.energy + config.sleepEnergyRecovery);
                gameState.hunger = Math.max(0, gameState.hunger - config.sleepHungerDecay);
                gameState.happiness = Math.max(0, gameState.happiness - 0.1);
            } else {
                // –û–±—ã—á–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
                gameState.hunger = Math.max(0, gameState.hunger - config.hungerDecay);
                gameState.energy = Math.max(0, gameState.energy - config.energyDecay);
                gameState.happiness = Math.max(0, gameState.happiness - config.happinessDecay);
                gameState.cleanliness = Math.max(0, gameState.cleanliness - config.cleanlinessDecay);
                
                // –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä –∫–æ—Ä–æ–≤–∫–∏ (—Ä–µ–¥–∫–æ)
                if (Date.now() - gameState.lastTalkTime > gameState.talkCooldown) {
                    const talkProbability = userSettings.talkFrequency === 'low' ? 0.05 : 
                                          userSettings.talkFrequency === 'often' ? 0.2 : 0.1;
                    
                    if (Math.random() < talkProbability) {
                        makeCowTalk(false);
                        gameState.lastTalkTime = Date.now();
                    }
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è
            checkLevelUp();
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            updateUI();
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            if (userSettings.autosave && Math.random() < 0.15) {
                saveGame();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('level').textContent = `–£—Ä–æ–≤–µ–Ω—å ${gameState.level}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã
            document.getElementById('hunger-fill').style.width = `${gameState.hunger}%`;
            document.getElementById('energy-fill').style.width = `${gameState.energy}%`;
            document.getElementById('happiness-fill').style.width = `${gameState.happiness}%`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
            document.getElementById('hunger-value').textContent = `${Math.round(gameState.hunger)}%`;
            document.getElementById('energy-value').textContent = `${Math.round(gameState.energy)}%`;
            document.getElementById('happiness-value').textContent = `${Math.round(gameState.happiness)}%`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä–æ–≤—ã
            updateCowState();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—Ä–æ–≤–∫–∏
        function updateCowState() {
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –∫–ª–∞—Å—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
            cowCharacter.classList.remove('cow-happy', 'cow-sleep', 'cow-dance', 'cow-hungry', 'cow-sad');
            
            if (gameState.isSleeping) {
                cowCharacter.classList.add('cow-sleep');
                cowEmoji.textContent = 'üò¥';
                return;
            } else {
                cowEmoji.textContent = 'üêÑ';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
            if (gameState.happiness > 80) {
                cowCharacter.classList.add('cow-happy');
            } else if (gameState.hunger < 30) {
                cowCharacter.classList.add('cow-hungry');
                cowEmoji.textContent = 'üòã';
            } else if (gameState.energy < 30 || gameState.happiness < 40) {
                cowCharacter.classList.add('cow-sad');
                cowEmoji.textContent = 'üòî';
            }
            
            // –°–æ–æ–±—â–µ–Ω–∏—è –æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è—Ö
            if (gameState.hunger < 30) {
                showMessage("–Ø –≥–æ–ª–æ–¥–Ω–∞—è... üçé", 4000);
            } else if (gameState.energy < 30) {
                showMessage("–Ø —É—Å—Ç–∞–ª–∞... üí§", 4000);
            } else if (gameState.happiness < 40) {
                showMessage("–ú–Ω–µ —Å–∫—É—á–Ω–æ... üéÆ", 4000);
            } else if (gameState.cleanliness < 60) {
                showMessage("–Ø –≥—Ä—è–∑–Ω–∞—è! üõÅ", 4000);
            }
        }
        
        // –†–∞–∑–≥–æ–≤–æ—Ä –∫–æ—Ä–æ–≤–∫–∏
        function makeCowTalk(isGreeting = false) {
            if (!userSettings.hints) return;
            
            let message = "";
            
            if (isGreeting) {
                // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
                message = cowVocabulary.greetings[Math.floor(Math.random() * cowVocabulary.greetings.length)];
            } else {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏
                for (const need of cowVocabulary.needs) {
                    if (need.condition()) {
                        message = need.phrases[Math.floor(Math.random() * need.phrases.length)];
                        break;
                    }
                }
                
                // –ï—Å–ª–∏ –Ω–µ—Ç —Å—Ä–æ—á–Ω—ã—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π, –≥–æ–≤–æ—Ä–∏–º —á—Ç–æ-—Ç–æ –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ
                if (!message && gameState.happiness > 70) {
                    message = cowVocabulary.happy[Math.floor(Math.random() * cowVocabulary.happy.length)];
                }
                
                // –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ –∏ –Ω–µ—Ç –ø–æ–∑–∏—Ç–∏–≤–∞, –∏–Ω–æ–≥–¥–∞ –º–æ–ª—á–∏–º
                if (!message && Math.random() > 0.3) {
                    return; // –ú–æ–ª—á–∏–º
                }
                
                // –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –≥–æ–≤–æ—Ä–∏–º —Å–ø–∞—Å–∏–±–æ
                if (!message) {
                    message = cowVocabulary.thanks[Math.floor(Math.random() * cowVocabulary.thanks.length)];
                }
            }
            
            showMessage(message, 5000);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
            if (userSettings.animations) {
                cowCharacter.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    cowCharacter.style.transform = 'scale(1)';
                }, 300);
            }
            
            gameState.lastTalkTime = Date.now();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(message, duration = 5000) {
            if (!userSettings.hints) return;
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä
            if (messageTimer) {
                clearTimeout(messageTimer);
            }
            
            messageBubble.textContent = message;
            messageBubble.classList.add('show');
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
            messageTimer = setTimeout(() => {
                messageBubble.classList.remove('show');
                messageTimer = null;
            }, duration);
        }
        
        // –î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞
        function feedCow() {
            if (gameState.hunger >= config.maxHunger) {
                showMessage("–Ø —É–∂–µ —Å—ã—Ç–∞! üçΩÔ∏è", 4000);
                return;
            }
            
            gameState.hunger = Math.min(config.maxHunger, gameState.hunger + 25);
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 10);
            gameState.coins += 5;
            
            if (userSettings.animations) {
                cowCharacter.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    cowCharacter.style.transform = 'scale(1)';
                }, 300);
            }
            
            makeCowTalk();
            updateUI();
        }
        
        function toggleSleep() {
            gameState.isSleeping = true;
            sleepOverlay.classList.add('active');
            
            const buttons = actionsPanel.querySelectorAll('.action-btn');
            buttons.forEach(btn => {
                if (!btn.querySelector('.btn-icon').textContent.includes('üí§')) {
                    btn.disabled = true;
                }
            });
            
            showMessage("–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏... üåô", 4000);
            updateUI();
        }
        
        function wakeUp() {
            gameState.isSleeping = false;
            sleepOverlay.classList.remove('active');
            
            const buttons = actionsPanel.querySelectorAll('.action-btn');
            buttons.forEach(btn => btn.disabled = false);
            
            showMessage("–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è", 4000);
            updateUI();
        }
        
        function playMiniGame() {
            // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –º–∏–Ω–∏-–∏–≥—Ä—ã
            const randomGame = miniGames[Math.floor(Math.random() * miniGames.length)];
            miniGameOverlay.style.display = 'flex';
            randomGame.play();
        }
        
        function closeMiniGame() {
            miniGameOverlay.style.display = 'none';
            document.getElementById('mini-game-container').innerHTML = '';
        }
        
        function cleanCow() {
            gameState.cleanliness = Math.min(config.maxCleanliness, gameState.cleanliness + 40);
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 15);
            gameState.coins += 3;
            
            showMessage("–Ø —Ç–µ–ø–µ—Ä—å —á–∏—Å—Ç–∞—è! üõÅ", 4000);
            updateUI();
        }
        
        function healCow() {
            const cost = 20;
            if (gameState.coins < cost) {
                showMessage(`–ù—É–∂–Ω–æ ${cost} –º–æ–Ω–µ—Ç! üí∞`, 4000);
                return;
            }
            
            gameState.coins -= cost;
            gameState.hunger = Math.min(config.maxHunger, gameState.hunger + 20);
            gameState.energy = Math.min(config.maxEnergy, gameState.energy + 30);
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 40);
            
            if (userSettings.effects) {
                cowCharacter.style.filter = 'drop-shadow(0 0 20px #4CAF50)';
                setTimeout(() => {
                    cowCharacter.style.filter = 'drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2))';
                }, 1000);
            }
            
            showMessage("–°–ø–∞—Å–∏–±–æ, —Ç–µ–ø–µ—Ä—å —è –∑–¥–æ—Ä–æ–≤–∞! ‚ù§Ô∏è", 4000);
            updateUI();
        }
        
        function danceCow() {
            if (gameState.energy < 10) {
                showMessage("–ù–µ—Ç —Å–∏–ª —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å... ‚ö°", 4000);
                return;
            }
            
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 30);
            gameState.energy = Math.max(0, gameState.energy - 10);
            gameState.coins += 10;
            
            if (userSettings.animations) {
                cowCharacter.classList.add('cow-dance');
                setTimeout(() => {
                    cowCharacter.classList.remove('cow-dance');
                }, 2000);
            }
            
            showMessage("–¢–∞–Ω—Ü—É–µ–º! üíÉ", 4000);
            updateUI();
        }
        
        function useToilet() {
            if (gameState.hunger < 50) {
                showMessage("–ú–Ω–µ –Ω–µ –Ω—É–∂–Ω–æ —Å–µ–π—á–∞—Å üöΩ", 4000);
                return;
            }
            
            gameState.hunger = Math.max(0, gameState.hunger - 20);
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 10);
            gameState.coins += 2;
            
            showMessage("–§—É—Ö, –ø–æ–ª–µ–≥—á–∞–ª–æ! üòÖ", 4000);
            updateUI();
        }
        
        function petCow() {
            gameState.happiness = Math.min(config.maxHappiness, gameState.happiness + 15);
            gameState.energy = Math.min(config.maxEnergy, gameState.energy + 5);
            
            if (userSettings.animations) {
                cowCharacter.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    cowCharacter.style.transform = 'scale(1)';
                }, 200);
            }
            
            makeCowTalk();
            updateUI();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
        function checkLevelUp() {
            gameState.xp += (gameState.hunger + gameState.energy + gameState.happiness + gameState.cleanliness) / 400;
            
            if (gameState.xp >= gameState.maxXP) {
                gameState.level++;
                gameState.xp = 0;
                gameState.maxXP = Math.floor(gameState.maxXP * 1.5);
                gameState.coins += gameState.level * 20;
                
                showMessage(`üéâ –£—Ä–æ–≤–µ–Ω—å ${gameState.level}! –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!`, 5000);
                
                if (userSettings.effects) {
                    cowCharacter.style.filter = 'drop-shadow(0 0 30px gold)';
                    setTimeout(() => {
                        cowCharacter.style.filter = 'drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2))';
                    }, 2000);
                }
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —Å—á–∞—Å—Ç—å—è
                cowCharacter.classList.add('cow-happy');
                setTimeout(() => {
                    cowCharacter.classList.remove('cow-happy');
                }, 3000);
            }
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏
        function startGame() {
            mainMenu.style.display = 'none';
            settingsScreen.style.display = 'none';
            gameScreen.style.display = 'block';
            initGame();
        }
        
        function showSettings() {
            saveGame();
            mainMenu.style.display = 'none';
            gameScreen.style.display = 'none';
            settingsScreen.style.display = 'block';
        }
        
        function backToGame() {
            saveGame();
            mainMenu.style.display = 'none';
            settingsScreen.style.display = 'none';
            gameScreen.style.display = 'block';
        }
        
        function backToMenu() {
            saveGame();
            mainMenu.style.display = 'block';
            gameScreen.style.display = 'none';
            settingsScreen.style.display = 'none';
        }
        
        function toggleSetting(setting) {
            const toggle = document.getElementById(`${setting}-toggle`);
            if (toggle) {
                userSettings[setting] = !userSettings[setting];
                toggle.classList.toggle('active');
                saveSettings();
            }
        }
        
        function resetGame() {
            if (confirm("–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!")) {
                gameState = {
                    hunger: 80,
                    energy: 90,
                    happiness: 85,
                    cleanliness: 95,
                    coins: 50,
                    level: 1,
                    isSleeping: false,
                    xp: 0,
                    maxXP: 100,
                    lastTalkTime: 0,
                    talkCooldown: 30000
                };
                
                localStorage.removeItem('dunyakhaSave');
                showMessage("–ù–æ–≤–∞—è –∏–≥—Ä–∞ –Ω–∞—á–∞—Ç–∞! üéÆ", 4000);
                updateUI();
                
                // –ï—Å–ª–∏ –º—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –∏–≥—Ä—É
                if (settingsScreen.style.display === 'block') {
                    backToGame();
                }
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
        function saveGame() {
            const saveData = {
                state: gameState,
                timestamp: Date.now()
            };
            
            try {
                localStorage.setItem('dunyakhaSave', JSON.stringify(saveData));
            } catch(e) {
                console.log("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä—ã");
            }
        }
        
        function loadGame() {
            try {
                const saved = localStorage.getItem('dunyakhaSave');
                if (saved) {
                    const saveData = JSON.parse(saved);
                    const daysOld = (Date.now() - saveData.timestamp) / (1000 * 3600 * 24);
                    if (daysOld < 30) {
                        gameState = { ...gameState, ...saveData.state };
                        showMessage("–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! üëã", 4000);
                    }
                }
            } catch(e) {
                console.log("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã");
            }
        }
        
        function saveSettings() {
            const talkFrequencySelect = document.getElementById('talk-frequency');
            const voiceVolumeSlider = document.getElementById('voice-volume');
            
            if (talkFrequencySelect) userSettings.talkFrequency = talkFrequencySelect.value;
            if (voiceVolumeSlider) userSettings.voiceVolume = voiceVolumeSlider.value;
            
            try {
                localStorage.setItem('dunyakhaSettings', JSON.stringify(userSettings));
            } catch(e) {
                console.log("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫");
            }
        }
        
        function loadSettings() {
            try {
                const saved = localStorage.getItem('dunyakhaSettings');
                if (saved) {
                    const loadedSettings = JSON.parse(saved);
                    userSettings = { ...userSettings, ...loadedSettings };
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI –Ω–∞—Å—Ç—Ä–æ–µ–∫
                    Object.keys(userSettings).forEach(key => {
                        const toggle = document.getElementById(`${key}-toggle`);
                        if (toggle) {
                            if (userSettings[key] === true) {
                                toggle.classList.add('active');
                            } else if (userSettings[key] === false) {
                                toggle.classList.remove('active');
                            }
                        }
                    });
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å–µ–ª–µ–∫—Ç–∞ –∏ —Å–ª–∞–π–¥–µ—Ä–∞
                    const talkFrequencySelect = document.getElementById('talk-frequency');
                    const voiceVolumeSlider = document.getElementById('voice-volume');
                    
                    if (talkFrequencySelect && userSettings.talkFrequency) {
                        talkFrequencySelect.value = userSettings.talkFrequency;
                    }
                    
                    if (voiceVolumeSlider && userSettings.voiceVolume) {
                        voiceVolumeSlider.value = userSettings.voiceVolume;
                    }
                }
            } catch(e) {
                console.log("–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫");
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª–∞–π–¥–µ—Ä–æ–≤ –∏ —Å–µ–ª–µ–∫—Ç–æ–≤
            const voiceVolumeSlider = document.getElementById('voice-volume');
            const talkFrequencySelect = document.getElementById('talk-frequency');
            
            if (voiceVolumeSlider) {
                voiceVolumeSlider.addEventListener('input', function() {
                    userSettings.voiceVolume = this.value;
                    saveSettings();
                });
            }
            
            if (talkFrequencySelect) {
                talkFrequencySelect.addEventListener('change', function() {
                    userSettings.talkFrequency = this.value;
                    saveSettings();
                });
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
            mainMenu.style.display = 'block';
            gameScreen.style.display = 'none';
            settingsScreen.style.display = 'none';
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', () => {
                saveGame();
                saveSettings();
            });
            
            // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
            document.addEventListener('touchstart', function() {}, {passive: true});
        });
    </script>
</body>
  </html>
